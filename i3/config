# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod1
set $win Mod4

set $w1 "1"
set $w2 "2"
set $w3 "3"
set $w4 "4"
set $w5 "5"
set $w6 "6"
set $w7 "7"
set $w8 "8"
set $w9 "9"
set $w10 "10"

set $baseO3    #002b36
set $baseO2    #073642
set $baseO1    #586e75
set $baseO0    #657b83
set $base0     #839496
set $base1     #93a1a1
set $base2     #eee8d5
set $base3     #fdf6e3
set $yellow    #b58900
set $orange    #cb4b16
set $red       #dc322f
set $magenta   #d33682
set $violet    #6c71c4
set $blue      #268bd2
set $cyan      #2aa198
set $green     #859900

# class                 border  backgr. text    indicator child_border
client.focused          $green $green #ffffff #2e9ef4   $green
# client.focused_inactive #333333 #5f676a #ffffff #484e50   $baseO2
# client.unfocused        #333333 $baseO3 #888888 #292d2e   $baseO3
# client.urgent           #2f343a #900000 #ffffff #900000   $red
# client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c
#
# client.background       #ffffff

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
font xft:Inconsolata
# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

default_border pixel 3
default_floating_border pixel 3
hide_edge_borders both
focus_follows_mouse no
workspace_auto_back_and_forth no
mouse_warping none
focus_on_window_activation urgent

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Launch terminal
bindsym $win+Return exec i3-sensible-terminal
bindsym $mod+Return exec emacsclient -s daemon -c -e "(vterm)"

# kill focused window
bindsym $mod+F4 kill
bindsym $mod+Control+q kill

# start dmenu (a program launcher)
bindsym $mod+F2 exec fish -ic gmrun
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop
bindsym $mod+F3 exec i3-input
bindsym Control+q exec true

# Launchers
bindsym Print exec xfce4-screenshooter
bindsym $mod+Control+w exec firefox
# bindsym $mod+Control+s exec ~/dotfiles/scripts/wtoggle catfish
# bindsym $mod+Control+c [title="calcurse"] scratchpad show
bindsym $mod+Control+f exec urxvt -e ranger
# bindsym $mod+Control+m exec "[ \\"$(i3-msg '[class=\\"Astroid\\"] scratchpad show', floating disable)\\" = \\"[{\\\\"success\\\\":true},{\\\\"success\\\\":true}]\\" ] || i3-msg '[class=\\"Astroid\\"] move scratchpad'"
# bindsym $mod+Control+m [class="Astroid"] scratchpad show; [class="URxvt" title="astroid@"] scratchpad show
bindsym $mod+Control+x exec ~/dotfiles/scripts/i3_minimize_toggle '[class="Astroid"]'; exec ~/dotfiles/scripts/i3_minimize_toggle '[class="URxvt" title="astroid@"]'
bindsym Control+Shift+p exec systemd-cat ~/dotfiles/scripts/mail-poll.sh -a
bindsym $mod+Control+e exec ~/dotfiles/scripts/i3_minimize_toggle '[class="easyeffects"]'; exec ~/dotfiles/scripts/i3_minimize_toggle '[class="URxvt" title="easyeffects@"]'
bindsym $mod+Control+z exec zotero
# bindsym $mod+Control+p exec offlineimap -1 -o -u quiet
bindsym $mod+Control+n exec urxvt -e ncmpcpp
bindsym $mod+Control+m exec strawberry
bindsym $mod+Control+t exec urxvt -e trackma-curses
# bindsym $mod+Control+r exec urxvt -e tmux new-session -A -s newsboat newsboat
# bindsym $mod+Control+e exec ebook-viewer --continue
bindsym $mod+Control+j exec emacsclient -s daemon -c
bindsym $mod+Control+p exec ~/dotfiles/scripts/open-pictures.sh

bindsym $mod+w exec xclip -selection primary -o | xclip -selection clipboard -i

# bindsym $mod+Control+t append_layout ~/dotfiles/i3/ws-terms.json

bindsym XF86AudioLowerVolume exec amixer -q set Master 2%-
bindsym XF86AudioRaiseVolume exec amixer -q set Master 2%+
bindsym XF86AudioMute exec amixer -q set Master toggle
bindsym XF86AudioPause exec cmus-remote -u; exec playerctl -p 'strawberry' play-pause; exec mpc toggle
bindsym XF86AudioPlay exec cmus-remote -u; exec playerctl -p 'strawberry' play-pause; exec mpc toggle
bindsym XF86AudioNext exec cmus-remote -n; exec playerctl -p 'strawberry' next; exec mpc next
bindsym XF86AudioPrev exec cmus-remote -r; exec playerctl -p 'strawberry' previous; exec mpc prev

bindsym $win+c exec cmus-remote -u; exec playerctl -p 'strawberry' play-pause; exec mpc toggle
bindsym $win+b exec cmus-remote -n; exec playerctl -p 'strawberry' next; exec mpc next
bindsym $win+z exec cmus-remote -r; exec playerctl -p 'strawberry' previous; exec mpc prev
bindsym $win+Shift+c exec playerctl -p "spotify" play-pause
bindsym $win+Shift+b exec playerctl -p "spotify" next
bindsym $win+Shift+z exec playerctl -p "spotify" previous
bindsym $win+x exec cmus-remote -v -5%; exec xdotool search --class "spotify" key --window %@ ctrl+Down; exec mpc volume | grep -Po '[0-9]+' | awk '{print $1 - 2}' | xargs mpc volume; exec playerctl -p 'strawberry' volume 0.02-
bindsym $win+v exec cmus-remote -v +5%; exec xdotool search --class "spotify" key --window %@ ctrl+Up; exec mpc volume | grep -Po '[0-9]+' | awk '{print $1 + 2}' | xargs mpc volume; exec playerctl  -p 'strawberry' volume 0.02+

# bindsym XFMonBrightnessUp exec xbacklight -inc 5
# bindsym XFMonBrightnessDown exec xbacklight -dec 5
# bindsym XF86MonBrightnessUp exec xbacklight -inc 5
# bindsym XF86MonBrightnessDown exec xbacklight -dec 5

bindsym Pause exec systemctl suspend

# change focus
bindsym $mod+Shift+Tab focus left
bindsym $mod+q focus down
bindsym $mod+Shift+q focus up
bindsym $mod+Tab focus right

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $win+Shift+Tab move left
bindsym $win+q move down
bindsym $win+Shift+q move up
bindsym $win+Tab move right

bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# split in horizontal orientation
bindsym $win+s split h

# split in vertical orientation
bindsym $win+d split v

# enter fullscreen mode for the focused container
bindsym $mod+Ctrl+Return fullscreen

# change container layout (stacked, tabbed, toggle split)
bindsym $win+r layout stacking
bindsym $win+w layout tabbed
bindsym $win+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $win+a focus parent

# focus the child container
bindsym $win+f focus child

# switch to workspace
bindsym $mod+1 workspace $w1
bindsym $mod+2 workspace $w2
bindsym $mod+3 workspace $w3
bindsym $mod+4 workspace $w4
bindsym $mod+5 workspace $w5
bindsym $mod+6 workspace $w6
bindsym $mod+7 workspace $w7
bindsym $mod+8 workspace $w8
bindsym $mod+9 workspace $w9
bindsym $mod+0 workspace $w10

#bindsym $mod+Tab workspace back_and_forth
bindsym $mod+Shift+a move workspace to output left
#bindsym $mod+Shift+d move workspace to output right
bindsym $mod+a focus output left

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $w1
bindsym $mod+Shift+2 move container to workspace $w2
bindsym $mod+Shift+3 move container to workspace $w3
bindsym $mod+Shift+4 move container to workspace $w4
bindsym $mod+Shift+5 move container to workspace $w5
bindsym $mod+Shift+6 move container to workspace $w6
bindsym $mod+Shift+7 move container to workspace $w7
bindsym $mod+Shift+8 move container to workspace $w8
bindsym $mod+Shift+9 move container to workspace $w9
bindsym $mod+Shift+0 move container to workspace $w10

#bindsym $mod+Shift+Tab move container to workspace back_and_forth; workspace back_and_forth

# reload the configuration file
bindsym $mod+Shift+F3 reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
#bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+p exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 5 px or 5 ppt
        bindsym j resize grow height 5 px or 5 ppt
        bindsym k resize shrink height 5 px or 5 ppt
        bindsym l resize grow width 5 px or 5 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 5 px or 5 ppt
        bindsym Down resize grow height 5 px or 5 ppt
        bindsym Up resize shrink height 5 px or 5 ppt
        bindsym Right resize grow width 5 px or 5 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
        output          DVI-I-1
        output          eDP1
        output          eDP-1
        position        top
        status_command  python ~/.i3/i3status.py

        colors {
        #     background $baseO3
        #     statusline #ffffff
        #     separator $baseO2
        #
            focused_workspace  $baseO2 $green $base3
        #     active_workspace   $baseO2 $yellow $base1
        #     inactive_workspace $baseO2 $baseO3 $base1
        #     urgent_workspace   $baseO2 $baseO3 $red
        #     binding_mode       $baseO2 $green $base3
        }
}

bar {
        output          HDMI1
        output          HDMI-0
        tray_output     none
        position        top
        status_command  python ~/.i3/i3status2.py

        colors {
        #     background #000000
        #     statusline #ffffff
        #     separator #666666
        #
            focused_workspace  $baseO2 $green $base3
        #     active_workspace   $yellow $yellow $base1
        #     inactive_workspace $baseO3 $baseO3 $base1
        #     urgent_workspace   $baseO3 $baseO3 $red
        #     binding_mode       #2f343a #900000 #ffffff
        }
}

# Workspace management

workspace $w3 output DVI-I-1

assign [class="Spotify"] $w9
assign [title="i3_7"] $w7

for_window [title="^Messenger — Mozilla Firefox"] move to workspace $w3
for_window [title="^WhatsApp — Mozilla Firefox"] move to workspace $w3
for_window [title="Gitter — Mozilla Firefox"] move to workspace $w3
for_window [class="Skype"] move to workspace $w8
# for_window [class="Steam"] floating enable
for_window [class="gimp"] floating enable
for_window [class="(?i)pavucontrol"] floating enable
for_window [class="Catfish"] floating enable
for_window [class="ssh-askpass"] floating enable
for_window [class="Astroid" window_type="normal"] move scratchpad
for_window [class="easyeffects" window_type="normal"] move scratchpad
# for_window [title="^calcurse$"] move scratchpad

assign [class="sun-applet-AppletViewer"] $w7

# Start up
exec --no-startup-id pasystray -a
exec --no-startup-id nm-applet
exec --no-startup-id picom -CGb
exec --no-startup-id xset -dpms
exec --no-startup-id laptop-mode force
# exec --no-startup-id dropbox
# exec --no-startup-id skype
# exec --no-startup-id offlineimap -1 -u quiet
# exec --no-startup-id urxvt -e sup
exec --no-startup-id astroid
exec --no-startup-id easyeffects
# exec --no-startup-id urxvt -e calcurse
# exec --no-startup-id urxvt -e tmux new -s newsboat newsboat
exec --no-startup-id clipit
exec --no-startup-id redshift-gtk
exec --no-startup-id clight
exec --no-startup-id clight-gui --tray
exec --no-startup-id rot8 --touchscreen "Wacom HID 48EB Finger"
exec --no-startup-id touchegg
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 
exec --no-startup-id devmon
exec --no-startup-id blueberry-tray
exec --no-startup-id /usr/lib/xfce4/notifyd/xfce4-notifyd
exec --no-startup-id zsh -c "sshfs fserver-vpn ~/fserver"
exec --no-startup-id i3-msg "workspace 9; \
    append_layout /home/fran/dotfiles/i3/monitor.json; \
    exec urxvt -T htop -e htop; \
    exec urxvt -T atop1 -e sh -c 'sleep 1 && atop -lp'; \
    exec urxvt -T atop2 -e sh -c 'sleep 2 && atop -lpM'; \
    exec urxvt -T sysmonitor -e sh -c 'watch --color -t -n60 ~/dev/scripting/sysmonitor.sh --color'; \
    exec urxvt -T lnav -e sh -c 'journalctl --since -1h -f | lnav -I ~/dotfiles/lnav/'"
